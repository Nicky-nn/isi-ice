import{P as p}from"./selderee-BOLtqnD5.js";import{i as u}from"./domhandler-DEM-868D.js";function y(t){return new p(o(t))}function o(t){const n=t.map(f);return(r,...e)=>n.flatMap(a=>a(r,...e))}function f(t){switch(t.type){case"terminal":{const n=[t.valueContainer];return(r,...e)=>n}case"tagName":return h(t);case"attrValue":return P(t);case"attrPresence":return N(t);case"pushElement":return v(t);case"popElement":return g(t)}}function h(t){const n={};for(const r of t.variants)n[r.value]=o(r.cont);return(r,...e)=>{const a=n[r.name];return a?a(r,...e):[]}}function N(t){const n=t.name,r=o(t.cont);return(e,...a)=>Object.prototype.hasOwnProperty.call(e.attribs,n)?r(e,...a):[]}function P(t){const n=[];for(const e of t.matchers){const a=e.predicate,c=o(e.cont);n.push((s,l,...m)=>a(s)?c(l,...m):[])}const r=t.name;return(e,...a)=>{const c=e.attribs[r];return c||c===""?n.flatMap(s=>s(c,e,...a)):[]}}function v(t){const n=o(t.cont),r=t.combinator==="+"?i:E;return(e,...a)=>{const c=r(e);return c===null?[]:n(c,e,...a)}}const i=t=>{const n=t.prev;return n===null?null:u(n)?n:i(n)},E=t=>{const n=t.parent;return n&&u(n)?n:null};function g(t){const n=o(t.cont);return(r,e,...a)=>n(e,...a)}export{y as h};
