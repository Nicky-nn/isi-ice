import{j as e,r as R}from"./react-C-yax-zd.js";import{S as T}from"./SimpleContainer-tFVAehGQ.js";import{B as N}from"./Breadcrumb-BAVYU1BR.js";import{S as x}from"./SimpleCard-Cf1MrNuW.js";import{o as z}from"./@hookform-CI7dTiWF.js";import{u as D,C as A}from"./react-hook-form-Cc6cmx_T.js";import{n as j}from"./notification-CZdNX9HX.js";import{A as I,s as C,a as g,u as y}from"./index-eXxrUaeE.js";import{g as S,G as f}from"./graphql-request-rGYrdPjm.js";import{s as B,c as L,a as E,b as U}from"./yup-DbVgGITq.js";import{e as V}from"./yup-locales-C3yB5wWh.js";import{aI as P,aJ as r,aK as l,h as d,g as v,aL as b,$ as k,aM as F,aN as O,aO as q,aP as h,ai as u,aQ as p,aR as G,aS as $,aT as M}from"./@mui-Cg5JgIJd.js";import{H as m}from"./Typography-SNySdv6H.js";import"./@babel-BWOPM2cf.js";import"./react-router-dom-BXf9Krd-.js";import"./react-dom-BMaWjgIA.js";import"./scheduler-CzFDRTuY.js";import"./react-router-m6rhPc7O.js";import"./@remix-run-DEp2-txB.js";import"./react-toastify-Bq65RiZx.js";import"./clsx-B-dksMZM.js";import"./rc-input-number-DHeBSjOn.js";import"./@rc-component-BLzWySNC.js";import"./classnames-F3cnkUDL.js";import"./rc-input-CDxr26_S.js";import"./rc-util-RNQGGLoE.js";import"./react-is-DcfIKM1A.js";import"./react-datepicker-D7PCQ8zk.js";import"./date-fns-9p2ure4y.js";import"./react-onclickoutside-vgQ6ifgl.js";import"./@floating-ui-BqRERJ-b.js";import"./perfect-scrollbar-BfaLzep3.js";import"./@tanstack-CH50zjZF.js";import"./lodash-Dwhj6_6J.js";import"./jwt-decode-VWaDGczM.js";import"./sweetalert2-CxYvYGPM.js";import"./nanoid-CeQjyfxW.js";import"./@emotion-D9k8Qpvi.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-NkKAe6Bn.js";import"./react-transition-group-C1IEqfrK.js";import"./dom-helpers-D0mFdbeO.js";import"./prop-types-tGFuYKac.js";import"./@popperjs-BQBsAJpH.js";import"./graphql-BS3ZITc9.js";import"./cross-fetch-Ml2K_YIJ.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-CW3e93qZ.js";const H=S`
  mutation CAMBIAR_PASSWORD($password: String!, $nuevoPassword: String!) {
    usuarioCambiarPassword(password: $password, nuevoPassword: $nuevoPassword)
  }
`,W=async i=>{const s=new f("https://sandbox.isipass.net/api"),a=localStorage.getItem(I);return s.setHeader("authorization",`Bearer ${a}`),(await s.request(H,{password:i.password,nuevoPassword:i.nuevoPassword})).usuarioCambiarPassword};B(V);const Q=L({password:E().required(),nuevoPassword:E().min(8).required(),nuevoPassword2:E().min(8).oneOf([U("nuevoPassword")],"Las nuevas contraseñas deben ser idénticas.").required()}),J=i=>{const{control:s,formState:{errors:a},handleSubmit:t}=D({defaultValues:{password:"",nuevoPassword:"",nuevoPassword2:""},resolver:z(Q)}),o=async c=>{await C({preConfirm:async()=>W(c).catch(n=>(g(n),!1)),text:"¿Confirma que desea cambiar la contraseña?"}).then(n=>{n.isConfirmed&&j("Se ha cambiado la contraseña correctamente, esta se aplica a partir del próximo reinicio de sesión")})},w=(c,n)=>console.log(c,n);return e.jsx(e.Fragment,{children:e.jsx(x,{title:"CAMBIAR CONTRASEÑA",childIcon:e.jsx(P,{}),children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,lg:6,md:6,xs:12,children:e.jsx("form",{onSubmit:t(o,w),children:e.jsxs(r,{container:!0,spacing:2,rowSpacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(A,{control:s,render:({field:c})=>{var n;return e.jsx(l,{fullWidth:!0,children:e.jsx(d,{name:"password",type:"password",label:"Ingrese su contraseña",value:c.value,variant:"outlined",size:"small",onChange:c.onChange,error:!!a.password,helperText:((n=a.password)==null?void 0:n.message)||""})})},name:"password"})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(A,{render:({field:c})=>{var n;return e.jsx(l,{fullWidth:!0,children:e.jsx(d,{name:"nuevoPassword",type:"password",label:"Ingrese su nueva contraseña",value:c.value,variant:"outlined",size:"small",onChange:c.onChange,error:!!a.nuevoPassword,helperText:((n=a.nuevoPassword)==null?void 0:n.message)||""})})},name:"nuevoPassword",control:s})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(A,{render:({field:c})=>{var n;return e.jsx(l,{fullWidth:!0,children:e.jsx(d,{name:"nuevoPassword2",type:"password",label:"Confirme su nueva contraseña",value:c.value,variant:"outlined",size:"small",onChange:c.onChange,error:!!a.nuevoPassword2,helperText:((n=a.nuevoPassword2)==null?void 0:n.message)||""})})},name:"nuevoPassword2",control:s})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{variant:"contained",type:"submit",children:"Guardar Cambios"})})]})})}),e.jsx(r,{item:!0,lg:6,md:6,xs:12})]})})})},_=i=>{const{user:s}=y();return e.jsx(e.Fragment,{children:e.jsx(x,{title:"PERFIL DE USUARIO",childIcon:e.jsx(b,{}),children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,lg:6,md:6,xs:12,children:e.jsx(l,{fullWidth:!0,children:e.jsx(d,{label:"Nombres",value:s.nombres,variant:"outlined",size:"small"})})}),e.jsx(r,{item:!0,lg:6,md:6,xs:12,children:e.jsx(l,{fullWidth:!0,children:e.jsx(d,{label:"Apellidos",value:s.apellidos,variant:"outlined",size:"small"})})}),e.jsx(r,{item:!0,lg:6,md:6,xs:12,children:e.jsx(l,{fullWidth:!0,children:e.jsx(d,{label:"Cargo",value:s.cargo,variant:"outlined",size:"small"})})}),e.jsx(r,{item:!0,lg:6,md:6,xs:12,children:e.jsx(l,{fullWidth:!0,children:e.jsx(d,{label:"Rol Operaciones",value:s.rol,variant:"outlined",size:"small"})})}),e.jsxs(r,{item:!0,lg:12,md:12,xs:12,children:[e.jsx(m,{children:"Restricción de accesos"}),s.dominio.map(a=>e.jsx(k,{label:a,variant:"outlined"},a))]})]})})})},K=S`
  mutation CLEAR_CACHE {
    clearCache
  }
`,Y=async()=>{const i=new f("https://sandbox.isipass.net/api"),s=localStorage.getItem(I);return i.setHeader("authorization",`Bearer ${s}`),(await i.request(K)).clearCache},Z=i=>{const s=async()=>{await C({preConfirm:()=>Y().catch(a=>(g(a),!1))}).then(a=>{a.isConfirmed&&j("Recarga de cache exitosa")})};return e.jsx(e.Fragment,{children:e.jsx(x,{title:"RECARGAR CACHE",childIcon:e.jsx(b,{}),children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsxs(r,{item:!0,lg:12,md:12,xs:12,children:[e.jsx(m,{children:"Ventajas de realizar este proceso"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Eliminar datos temporales que consumen espacio en memoria"}),e.jsx("li",{children:"Mejorar el rendimiento de consultas y envio de datos"}),e.jsx("li",{children:"Ejecutar la acción no hará que pierda la sesión"})]})]}),e.jsx(r,{item:!0,lg:12,md:12,xs:12,children:e.jsx(v,{variant:"contained",onClick:s,children:"EJECUTAR SERVICIO"})})]})})})},X=S`
  mutation SYNC_CATALOGOS {
    syncCatalogos
  }
`,ee=async()=>{const i=new f("https://sandbox.isipass.net/api"),s=localStorage.getItem(I);return i.setHeader("authorization",`Bearer ${s}`),(await i.request(X)).syncCatalogos},se=S`
  mutation SYNC_CUFD {
    syncCufd(forzarActualizacion: 1) {
      codigo
      codigoControl
      direccion
      fechaInicial
      fechaVigencia
    }
  }
`,re=async()=>{const i=new f("https://sandbox.isipass.net/api"),s=localStorage.getItem(I);return i.setHeader("authorization",`Bearer ${s}`),(await i.request(se)).syncCufd},ae=i=>{const s=async()=>{await C({text:"Confirma que desea realizar la acción, este proceso podria demorar varios minutos",preConfirm:()=>ee().catch(t=>(g(t),!1))}).then(t=>{t.isConfirmed&&j("Sincronización realizada correctamente")})},a=async()=>{await C({preConfirm:()=>re().catch(t=>(g(t),!1))}).then(t=>{t.isConfirmed&&j("CUFD se ha sincronizado correctamente")})};return e.jsx(e.Fragment,{children:e.jsx(x,{title:"SINCRONIZACIÓN DE DATOS",childIcon:e.jsx(b,{}),children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsxs(r,{item:!0,lg:12,md:12,xs:12,children:[e.jsx(m,{children:"Sincronización de CÓDIGO ÚNICO DE FACTURACION DIARIA (CUFD)"}),e.jsx("ol",{children:e.jsx("li",{children:"Nos permite poder emitir documentos fiscales durante el día"})})]}),e.jsx(r,{item:!0,lg:12,md:12,xs:12,children:e.jsx(v,{variant:"contained",size:"small",onClick:a,children:"EJECUTAR SERVICIO CUFD"})}),e.jsxs(r,{item:!0,lg:12,md:12,xs:12,children:[e.jsx(m,{children:"Sincronización de CATÁLOGOS"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Sincroniza todos los catalogos y clasificadores del sin."}),e.jsx("li",{children:"Este proceso puede demorar varios minutos dependiente de la conexion de internet y la diponibilidad de IMPUESTOS NACIONALES."}),e.jsx("li",{children:"Sincronización de: metodos pago, actividades, tipo punto venta, tipo Emision, producto servicio, tipo moneda, actividades por documento sector, tipo de factura, tipo documento identidad, motivo anulación, pais."})]})]}),e.jsx(r,{item:!0,lg:12,md:12,xs:12,children:e.jsx(v,{variant:"contained",size:"small",onClick:s,children:"EJECUTAR SERVICIO CATÁLOGOS"})})]})})})},ie=i=>{const{user:s}=y();return e.jsx(e.Fragment,{children:e.jsxs(x,{title:"SUCURSAL / PUNTO VENTA / ACTIVIDAD ECONÓMICA",childIcon:e.jsx(F,{}),children:[e.jsxs("div",{className:"responsive-table",style:{marginBottom:25},children:[e.jsx(m,{children:"SUCURSAL"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:150},children:"CÓDIGO"}),e.jsx("th",{children:"DIRECCIÓN"}),e.jsx("th",{children:"TELEFONO"}),e.jsx("th",{children:"DEPARTAMENTO"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{"data-label":"CÓDIGO",children:s.sucursal.codigo}),e.jsx("td",{"data-label":"DIRECCIÓN",children:s.sucursal.direccion}),e.jsx("td",{"data-label":"TELEFONO",children:s.sucursal.telefono}),e.jsx("td",{"data-label":"DEPARTAMENTO",children:s.sucursal.departamento.departamento})]})})]})]}),e.jsxs("div",{className:"responsive-table",style:{marginBottom:25},children:[e.jsx(m,{children:"PUNTO VENTA"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:150},children:"CÓDIGO"}),e.jsx("th",{children:"NOMBRE"}),e.jsx("th",{children:"TIPO"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{"data-label":"CÓDIGO",children:s.puntoVenta.codigo}),e.jsx("td",{"data-label":"NOMBRE",children:s.puntoVenta.nombre}),e.jsx("td",{"data-label":"TIPO",children:s.puntoVenta.tipoPuntoVenta.descripcion})]})})]})]}),e.jsxs("div",{className:"responsive-table",style:{marginBottom:25},children:[e.jsx(m,{children:"ACTIVIDAD ECONÓMICA"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:150},children:"CÓDIGO CAEB"}),e.jsx("th",{children:"DESCRIPCIÓN"}),e.jsx("th",{children:"TIPO"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{"data-label":"CÓDIGO CAEB",children:s.actividadEconomica.codigoCaeb}),e.jsx("td",{"data-label":"DESCRIPCIÓN",children:s.actividadEconomica.descripcion}),e.jsx("td",{"data-label":"TIPO",children:s.actividadEconomica.tipoActividad})]})})]})]})]})})},es=i=>{const[s,a]=R.useState(0),t=(o,w)=>{a(w)};return e.jsx(e.Fragment,{children:e.jsxs(T,{children:[e.jsx("div",{className:"breadcrumb",children:e.jsx(N,{routeSegments:[{name:"Gestión"}]})}),e.jsxs(r,{container:!0,spacing:2,columnSpacing:5,children:[e.jsx(r,{item:!0,sm:4,xs:12,children:e.jsx(x,{children:e.jsx(O,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(q,{component:"nav","aria-label":"main mailbox folders",children:[e.jsxs(h,{selected:s===0,onClick:o=>t(o,0),children:[e.jsx(u,{children:e.jsx(b,{})}),e.jsx(p,{primary:"Información Básica"})]}),e.jsxs(h,{selected:s===1,onClick:o=>t(o,1),children:[e.jsx(u,{children:e.jsx(P,{})}),e.jsx(p,{primary:"Cambiar Contraseña"})]}),e.jsxs(h,{selected:s===2,onClick:o=>t(o,2),children:[e.jsx(u,{children:e.jsx(G,{})}),e.jsx(p,{primary:"Sucursal / Punto Venta"})]}),e.jsxs(h,{selected:s===3,onClick:o=>t(o,3),children:[e.jsx(u,{children:e.jsx($,{})}),e.jsx(p,{primary:"Sincronización"})]}),e.jsxs(h,{selected:s===4,onClick:o=>t(o,4),children:[e.jsx(u,{children:e.jsx(M,{})}),e.jsx(p,{primary:"Recargar Cache"})]})]})})})}),e.jsxs(r,{item:!0,sm:7,xs:12,children:[s===0&&e.jsx(_,{}),s===1&&e.jsx(J,{}),s===2&&e.jsx(ie,{}),s===3&&e.jsx(ae,{}),s===4&&e.jsx(Z,{})]})]}),e.jsx(O,{py:"12px"})]})})};export{es as default};
