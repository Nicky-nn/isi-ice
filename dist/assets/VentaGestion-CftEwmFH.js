import{j as e,r as s}from"./react-C-yax-zd.js";import{e as ge}from"./@tanstack-CH50zjZF.js";import{M as xe}from"./material-react-table-B3_JpHKP.js";import{A as je}from"./AuditIconButton-Sfu7xKjf.js";import{S as Ce}from"./SimpleContainer-tFVAehGQ.js";import{aG as De,k as Ee,a5 as R,a6 as Y,a7 as P,aJ as g,aK as ve,aa as be,ab as Me,M as Se,a8 as V,g as y,b0 as N,bh as ye,bi as F,a0 as Fe,h as I,$ as re,ae as we,bj as Ae,bk as ze,bl as Te,bm as ne,bn as ke,aN as Ie}from"./@mui-Cg5JgIJd.js";import{n as $}from"./NumberInput-ChEcYOmf.js";import{S as Re,a as T}from"./SimpleMenu-bKr1ysvp.js";import{S as Ye}from"./StackMenuActionTable-DYZWaJ7j.js";import{B as Pe}from"./Breadcrumb-BAVYU1BR.js";import{P as w,a as se}from"./index-CmjSjgDW.js";import{A as K,e as Ve,a as q,u as Ne,f as O,i as L,v as G,s as Le,g as Oe,b as Be,o as W}from"./index-eXxrUaeE.js";import{f as B}from"./factura.listado.api-DJlaXX2Z.js";import{B as S}from"./react-toastify-Bq65RiZx.js";import{S as ie}from"./sweetalert2-CxYvYGPM.js";import{g as U,G as H}from"./graphql-request-rGYrdPjm.js";import{a8 as _}from"./date-fns-9p2ure4y.js";import{d as D}from"./dayjs-OUjY9ak4.js";import{e as A}from"./export-from-json-BvevaQwb.js";import{c as Q}from"./html-to-text-COF0MhL_.js";import{r as X,D as J}from"./react-datepicker-D7PCQ8zk.js";import{b as Z,n as $e}from"./notification-CZdNX9HX.js";import{m as Ge}from"./materialReactTableUtils-RKRDldrD.js";import{M as We}from"./muiTableAdvancedOptionsProps-8HbDsjdr.js";import"./@babel-BWOPM2cf.js";import"./react-dom-BMaWjgIA.js";import"./scheduler-CzFDRTuY.js";import"./highlight-words-DHKmS53s.js";import"./@emotion-D9k8Qpvi.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-NkKAe6Bn.js";import"./react-is-DcfIKM1A.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-C1IEqfrK.js";import"./dom-helpers-D0mFdbeO.js";import"./prop-types-tGFuYKac.js";import"./@popperjs-BQBsAJpH.js";import"./react-router-dom-BXf9Krd-.js";import"./react-router-m6rhPc7O.js";import"./@remix-run-DEp2-txB.js";import"./rc-input-number-DHeBSjOn.js";import"./@rc-component-BLzWySNC.js";import"./classnames-F3cnkUDL.js";import"./rc-input-CDxr26_S.js";import"./rc-util-RNQGGLoE.js";import"./perfect-scrollbar-BfaLzep3.js";import"./lodash-Dwhj6_6J.js";import"./jwt-decode-VWaDGczM.js";import"./nanoid-CeQjyfxW.js";import"./react-onclickoutside-vgQ6ifgl.js";import"./@floating-ui-BqRERJ-b.js";import"./graphql-BS3ZITc9.js";import"./cross-fetch-Ml2K_YIJ.js";import"./@selderee-yEdlZzad.js";import"./selderee-BOLtqnD5.js";import"./parseley-wlsb3dNE.js";import"./leac-fJIxp7iX.js";import"./peberminta-DElK8MKc.js";import"./domhandler-DEM-868D.js";import"./domelementtype-CtfTTIJJ.js";import"./htmlparser2-Ch2Z3JHo.js";import"./entities-B_n6S46Q.js";import"./deepmerge-B3UAOwEe.js";import"./dom-serializer-DSYhzfyK.js";const k=De("div")(({theme:t})=>({...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})),qe=t=>e.jsx(Ee,{justifyContent:"flex-end",mt:1,mb:1,direction:{xs:"column",sm:"row",md:"row",lg:"row"},spacing:{xs:1,sm:2,md:4},children:t.children}),Ke=U`
  query MOTIVO_ANULACION {
    sinMotivoAnulacion {
      codigoClasificador
      descripcion
    }
  }
`,Ue=async()=>{const t=new H("https://sandbox.isipass.net/api"),l=localStorage.getItem(K);return t.setHeader("authorization",`Bearer ${l}`),(await t.request(Ke)).sinMotivoAnulacion},He=U`
  mutation ANULAR($cuf: String!, $codigoMotivo: Int!) {
    facturaIceAnular(cuf: $cuf, codigoMotivo: $codigoMotivo) {
      cuf
    }
  }
`,_e=async(t,l)=>{const i=new H("https://sandbox.isipass.net/api"),o=localStorage.getItem(K);return i.setHeader("authorization",`Bearer ${o}`),(await i.request(He,{cuf:t,codigoMotivo:l})).facturaIceAnular};function Qe(){const t=s.useRef(!1);return s.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),s.useCallback(function(){return t.current},[t])}const Xe=t=>{const{onClose:l,open:i,factura:o,...v}=t;Qe();const[p,d]=s.useState([]),[x,h]=s.useState(!1),u={codigoMotivo:null},[f,b]=s.useState(u);s.useEffect(()=>{i&&b(u)},[i]),s.useEffect(()=>{(async()=>{await Ue().then(n=>{d(n||[])})})().then()},[]);const j=()=>{l()},E=async()=>{let c=!0;f.codigoMotivo||(S.error("Seleccione el motivo de la anulación"),c=!1),o!=null&&o.cuf||(S.error("Seleccione el documento"),c=!1),c&&ie.fire({...Ve,html:"¿Confirma que desea anular el documento? <br> este proceso no se podra revertir",showLoaderOnConfirm:!0,preConfirm:()=>(h(!0),o==null||o.cuf,f.codigoMotivo,_e((o==null?void 0:o.cuf)||"",f.codigoMotivo)),allowOutsideClick:()=>!ie.isLoading()}).then(n=>{n.isConfirmed&&(S.success("Documento Anulado correctamente"),l(!0),h(!1))}).catch(n=>{n.message.includes("nota de credito debito mal emitida")?(S.error("No se puede anular una factura con nota de crédito débito mal emitida"),q(n),S.error("No se puede anular una factura con nota de crédito débito mal emitida"),h(!1)):(S.error("Ha ocurrido un error"),q(n),h(!1))})};return e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"sm",open:i,...v,children:[e.jsx(Y,{children:"Anular Documento"}),e.jsx(P,{dividers:!0,children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsxs(g,{item:!0,lg:12,md:12,children:["Nro Factura: ",(o==null?void 0:o.numeroFactura)||""," ",e.jsx("br",{}),"Cliente: ",(o==null?void 0:o.cliente.razonSocial)||""," ",e.jsx("br",{}),"Fecha Emisión: ",(o==null?void 0:o.fechaEmision)||""," ",e.jsx("br",{})]}),e.jsx(g,{item:!0,lg:12,md:12,children:e.jsxs(ve,{sx:{width:"100%"},size:"small",children:[e.jsx(be,{id:"demo-select-small",children:"Motivo de la anulación"}),e.jsx(Me,{labelId:"Motivo de la anulación",value:f.codigoMotivo||"",label:"Motivo de la anulación",onChange:c=>{b({...f,codigoMotivo:parseInt(c.target.value)})},children:p.map(c=>e.jsx(Se,{value:c.codigoClasificador,children:c.descripcion},c.codigoClasificador))})]})})]})}),e.jsxs(V,{children:[e.jsx(y,{autoFocus:!0,onClick:j,disabled:x,children:"Cancelar"}),e.jsx(N,{onClick:E,loading:x,style:{marginRight:15},children:"Anular Documento"})]})]})})};X("es",_);const Je=t=>{var j;const{user:l}=Ne(),{onClose:i,open:o,...v}=t,[p,d]=s.useState(!1),[x,h]=s.useState([new Date,new Date]),[u,f]=x,b=async()=>{d(!0);const E=D(u).format("YYYY-MM-DD"),n=`fechaEmision<=${D(f).format("YYYY-MM-DD")} 24:00:00&fechaEmision>=${E} 00:00:00&usucre=${l.usuario}`,m={...w,limit:1e5,reverse:!1,query:n},{docs:M}=await B(m);if(d(!1),M.length>0){const a=M.map(r=>({numeroFactura:r.numeroFactura,fechaEmision:r.fechaEmision,codigoControl:r.cuf,sucursal:r.sucursal.codigo,puntoVenta:r.puntoVenta.codigo,razonSocial:r.cliente.razonSocial,codigoCliente:r.cliente.codigoCliente,numeroDocumento:r.cliente.numeroDocumento,complemento:r.cliente.complemento||"",metodoPago:r.metodoPago.descripcion,montoTotal:r.montoTotal,montoTotalMoneda:r.montoTotalMoneda,moneda:r.moneda.descripcion,detalleExtra:O(Q(r.detalleExtra,{preserveNewlines:!1,wordwrap:null})),estado:r.state,usucre:r.usucre,usuario:r.usuario}));A({data:a,fileName:"mis_ventas",exportType:A.types.csv,withBOM:!0})}else Z("No se han encontrado registros para el periodo seleccionado")};return s.useEffect(()=>{},[o]),e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{"& .MuiDialog-paper":{width:"80%",minHeight:300}},maxWidth:"xs",open:o,...v,children:[e.jsxs(Y,{children:["Exportar ventas para el usuario: ",(j=l.usuario)==null?void 0:j.toUpperCase()]}),e.jsx(P,{dividers:!0,children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{item:!0,sm:12,children:e.jsxs(ye,{color:"info",children:["Seleccione el periodo (",e.jsx("strong",{children:"fecha inicial - fecha final"}),")."," ",e.jsx("br",{}),"Para Obtener el reporte de una fecha debe realizar doble click en la fecha selecciona"]})}),e.jsx(g,{item:!0,sm:12,children:e.jsx(J,{selectsRange:!0,startDate:u,endDate:f,locale:"es",dateFormat:"dd/MM/yyyy",onChange:E=>{h(E)},isClearable:!0})})]})}),e.jsxs(V,{children:[e.jsx(y,{autoFocus:!0,disabled:p,color:"error",variant:"contained",size:"small",onClick:()=>{i()},children:"Cancelar"}),e.jsx(N,{loading:p,disabled:!D(u).isValid()||!D(f).isValid(),onClick:()=>b(),startIcon:e.jsx(F,{}),loadingPosition:"start",size:"small",variant:"contained",style:{marginRight:15},children:"Exportar Ventas"})]})]})})},Ze=U`
  mutation ALQUI_REENVIAR_EMAIL($cuf: String!, $emails: [String]!) {
    facturaIceReenviarEmail(cuf: $cuf, emails: $emails)
  }
`,eo=async t=>{const l=new H("https://sandbox.isipass.net/api"),i=localStorage.getItem(K);return l.setHeader("authorization",`Bearer ${i}`),await l.request(Ze,t)},oo=t=>{const{onClose:l,open:i,factura:o,...v}=t,[p,d]=s.useState(""),[x,h]=s.useState(!1),[u,f]=s.useState([]);s.useEffect(()=>{i&&(d((o==null?void 0:o.cliente.email)||""),f([(o==null?void 0:o.cliente.email)||""]))},[i]);const b=()=>{l()},j=async()=>{let n=!0;o!=null&&o.cuf||(S.error("Seleccione el documento"),n=!1),L(p)&&u.length===0&&(S.error("Debe registrar al menos un correo electrónico"),n=!1);for(const m of u)G(m)||(S.error(`${m} no es un correo electrónico válido`),n=!1);n&&await Le({preConfirm:()=>eo({cuf:o==null?void 0:o.cuf,emails:u}).catch(m=>(q(m),!1))}).then(m=>{m.isConfirmed&&($e(),l(m.value))})},E=()=>{if(!L(p)&&G(p)){const n=p.toLowerCase();u.includes(n)||(f([...u,n]),d(""))}},c=n=>{f(u.filter(m=>m!==n))};return e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:560}},maxWidth:"sm",open:i,...v,children:[e.jsx(Y,{children:"Reenviar Notificación de Factura"}),e.jsx(P,{dividers:!0,children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsxs(g,{item:!0,lg:12,md:12,children:["Nro Factura: ",(o==null?void 0:o.numeroFactura)||""," ",e.jsx("br",{}),"Cliente: ",(o==null?void 0:o.cliente.razonSocial)||""," ",e.jsx("br",{}),"Fecha Emisión: ",(o==null?void 0:o.fechaEmision)||""," ",e.jsx("br",{}),"Código de control CUF: ",(o==null?void 0:o.cuf)||""," ",e.jsx("br",{})]}),e.jsx(g,{item:!0,lg:12,md:12,children:e.jsx(Fe,{severity:"info",children:"Para ingresar varios correos electrónicos, escríbalos uno después del otro y sepárelos usando espacios, comas o punto y coma. Por ejemplo: cliente1@correo.com, cliente2@correo.com."})}),e.jsx(g,{item:!0,lg:12,md:12,children:e.jsx(I,{id:"emails",name:"emails",label:"Ingrese los correos electrónicos",helperText:"El botón se activará cuando ingrese un correo electrónico válido. Recuerde presionar la tecla Enter para agregar el correo electrónico.",size:"small",fullWidth:!0,multiline:!0,rows:2,value:p,onChange:n=>{const m=n.target.value.replace(/[\r\n]+/g,"");d(m)},onKeyDown:n=>{(n.key==="Enter"||n.key===" "||n.key===","||n.key===";")&&!L(p)&&G(p)&&(E(),d(""),n.target.value="",n.preventDefault())}})}),e.jsx(g,{item:!0,lg:12,md:12,children:u.map(n=>e.jsx(re,{label:n,onDelete:()=>c(n),color:"primary",variant:"outlined",style:{margin:5}},n))})]})}),e.jsxs(V,{children:[e.jsx(y,{autoFocus:!0,color:"error",size:"small",variant:"contained",onClick:b,disabled:x,children:"Cancelar"}),e.jsx(N,{variant:"contained",size:"small",onClick:j,loading:x,style:{marginRight:15},disabled:!L(p),children:"Enviar Notificación"})]})]})})};X("es",_);const to=t=>{const{onClose:l,open:i,...o}=t,[v,p]=s.useState(!1),[d,x]=s.useState(new Date),[h,u]=s.useState(null),f=j=>{const[E,c]=j;x(E),u(c)},b=async()=>{p(!0);const j=D(d).format("YYYY-MM-DD"),c=`fechaEmision<=${D(h).format("YYYY-MM-DD")} 24:00:00&fechaEmision>=${j} 00:00:00`,n={...w,limit:1e5,reverse:!1,query:c},{docs:m}=await B(n);if(p(!1),m.length>0){const M=[];for(const a of m)a.detalle.map(r=>{M.push({numeroFactura:a.numeroFactura,fechaEmision:a.fechaEmision,cuf:a.cuf,sucursal:a.sucursal.codigo,puntoVenta:a.puntoVenta.codigo,razonSocial:a.cliente.razonSocial,codigoCliente:a.cliente.codigoCliente,numeroDocumento:a.cliente.numeroDocumento,complemento:a.cliente.complemento||"",metodoPago:a.metodoPago.descripcion,nroItem:r.nroItem,actividadEconomica:r.actividadEconomica.codigoCaeb,productoServicio:r.productoServicio.descripcionProducto,detalleExtra:O(Oe(r.detalleExtra,"")),detalleExtraGeneral:O(Q(a.detalleExtra,{preserveNewlines:!1,wordwrap:null})),cantidad:r.cantidad,unidadMedida:r.unidadMedida.descripcion,precioUnitario:r.precioUnitario,montoDescuento:r.montoDescuento,montoTotal:a.montoTotal,montoTotalMoneda:a.montoTotalMoneda,moneda:a.moneda.descripcion,tipoCambio:a.tipoCambio,estado:a.state,usuario:a.usuario})});A({data:M,fileName:"reporte_detalle_ventas",exportType:A.types.csv,withBOM:!0})}else Z("No se han encontrado registros para el periodo seleccionado")};return s.useEffect(()=>{i&&(x(new Date),u(new Date))},[i]),e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435,height:500}},maxWidth:"sm",open:i,...o,children:[e.jsx(Y,{children:"Exportar Ventas + Detalles"}),e.jsx(P,{dividers:!0,children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{item:!0,sm:7,children:e.jsx(k,{children:e.jsx(J,{selected:d,onChange:f,locale:"es",startDate:d,endDate:h,selectsRange:!0,inline:!0,isClearable:!0})})}),e.jsxs(g,{item:!0,sm:5,children:[e.jsx(I,{sx:{mt:1},fullWidth:!0,label:"Fecha Inicial",value:D(d).format("DD/MM/YYYY")||"",size:"small"}),e.jsx(I,{sx:{mt:3},fullWidth:!0,label:"Fecha Final",value:D(h).format("DD/MM/YYYY")||"",size:"small"})]})]})}),e.jsxs(V,{children:[e.jsx(y,{autoFocus:!0,disabled:v,color:"error",variant:"contained",size:"small",onClick:()=>{l()},children:"Cancelar"}),e.jsx(N,{loading:v,disabled:!D(d).isValid()||!D(h).isValid(),onClick:()=>b(),startIcon:e.jsx(F,{}),loadingPosition:"start",size:"small",variant:"contained",style:{marginRight:15},children:"Exportar Ventas"})]})]})})};X("es",_);const ao=t=>{const{onClose:l,open:i,...o}=t,[v,p]=s.useState(!1),[d,x]=s.useState(new Date),[h,u]=s.useState(null),f=j=>{const[E,c]=j;x(E),u(c)},b=async()=>{p(!0);const j=D(d).format("YYYY-MM-DD"),c=`fechaEmision<=${D(h).format("YYYY-MM-DD")} 24:00:00&fechaEmision>=${j} 00:00:00`,n={...w,limit:1e4,reverse:!1,query:c},{docs:m}=await B(n);if(p(!1),m.length>0){const M=m.map(a=>({numeroFactura:a.numeroFactura,fechaEmision:a.fechaEmision,cuf:a.cuf,sucursal:a.sucursal.codigo,puntoVenta:a.puntoVenta.codigo,razonSocial:a.cliente.razonSocial,codigoCliente:a.cliente.codigoCliente,numeroDocumento:a.cliente.numeroDocumento,complemento:a.cliente.complemento||"",metodoPago:a.metodoPago.descripcion,montoTotal:a.montoTotal,montoTotalMoneda:a.montoTotalMoneda,moneda:a.moneda.descripcion,detalleExtra:O(Q(a.detalleExtra,{preserveNewlines:!1,wordwrap:null})),estado:a.state,usuario:a.usuario}));A({data:M,fileName:"reporte_ventas",exportType:A.types.csv,withBOM:!0})}else Z("No se han encontrado registros para el periodo seleccionado")};return s.useEffect(()=>{i&&(x(new Date),u(new Date))},[i]),e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435,height:500}},maxWidth:"sm",open:i,...o,children:[e.jsx(Y,{children:"Exportar Ventas"}),e.jsx(P,{dividers:!0,children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsxs(g,{item:!0,sm:5,children:[e.jsx(I,{sx:{mt:1},fullWidth:!0,label:"Fecha Inicial",value:D(d).format("DD/MM/YYYY")||"",size:"small"}),e.jsx(I,{sx:{mt:3},fullWidth:!0,label:"Fecha Final",value:D(h).format("DD/MM/YYYY")||"",size:"small"})]}),e.jsx(g,{item:!0,sm:7,children:e.jsx(k,{children:e.jsx(J,{selected:d,onChange:f,locale:"es",startDate:d,endDate:h,selectsRange:!0,inline:!0,isClearable:!0})})})]})}),e.jsxs(V,{children:[e.jsx(y,{autoFocus:!0,disabled:v,color:"error",variant:"contained",size:"small",onClick:()=>{l()},children:"Cancelar"}),e.jsx(N,{loading:v,disabled:!D(d).isValid()||!D(h).isValid(),onClick:()=>b(),startIcon:e.jsx(F,{}),loadingPosition:"start",size:"small",variant:"contained",style:{marginRight:15},children:"Exportar Ventas"})]})]})})},no=[{header:"Nro. Factura",accessorKey:"numeroFactura",size:130},{accessorKey:"fechaEmision",header:"Fecha Emisión",id:"fechaEmision",enableColumnFilter:!1,size:160},{header:"Razon Social",id:"cliente.razonSocial",accessorKey:"cliente.razonSocial",maxSize:250,minSize:200},{id:"cliente.numeroDocumento",header:"Nro. Documento",accessorFn:t=>e.jsxs("span",{children:[t.cliente.numeroDocumento," ",t.cliente.complemento?`-${t.cliente.complemento}`:""]}),filterFn:(t,l,i)=>t.original.cliente.numeroDocumento.startsWith(i),maxSize:150},{header:"Importe",accessorKey:"montoTotal",muiTableBodyCellProps:{align:"right"},Cell:({cell:t})=>e.jsx("span",{children:$(t.getValue(),{})}),size:150,enableColumnFilter:!1},{header:"Monto Moneda",accessorKey:"montoTotalMoneda",muiTableBodyCellProps:{align:"right"},accessorFn:t=>e.jsxs("span",{children:[" ",$(t.montoTotalMoneda,{})]}),size:150,enableColumnFilter:!1},{header:"Moneda",accessorKey:"moneda.descripcion",accessorFn:t=>e.jsx("strong",{children:t.moneda.descripcion}),size:110,enableColumnFilter:!1},{header:"Tipo Cambio",accessorKey:"tipoCambio",size:130,muiTableBodyCellProps:{align:"right"},accessorFn:t=>e.jsxs("span",{children:[" ",$(t.tipoCambio,{})]}),enableColumnFilter:!1},{accessorKey:"cuf",id:"cuf",header:"C.U.F."},{accessorKey:"usuario",id:"usuario",header:"Usuario"},{accessorKey:"state",header:"Estado",accessorFn:t=>e.jsx(re,{color:t.state===se.validada?"success":t.state===se.pendiente?"warning":"error",label:t.state,size:"small"}),filterVariant:"select",filterSelectOptions:Ge,filterFn:(t,l,i)=>t.original.state.toLowerCase().startsWith(i.toLowerCase())}],jt=()=>{const[t,l]=s.useState(!1),[i,o]=s.useState(null),[v,p]=s.useState(!1),[d,x]=s.useState(!1),[h,u]=s.useState(!1),[f,b]=s.useState(!1),[j,E]=s.useState(0),[c,n]=s.useState([]),[m,M]=s.useState([]),[a,r]=s.useState({pageIndex:w.page,pageSize:w.limit}),[le,so]=s.useState({}),[io,ee]=s.useState(!1),ce=async()=>{ee(!0);try{await te()}catch(C){console.error("Error al recargar los datos:",C)}ee(!1)},{data:de,isError:oe,isLoading:ue,refetch:te,isRefetching:me}=ge({queryKey:["gestionFacturas",c,a.pageIndex,a.pageSize,m],queryFn:async()=>{try{const C=Be(c),z={...w,page:a.pageIndex+1,limit:a.pageSize,reverse:m.length<=0,query:C},ae=await B(z);if(ae){const{pageInfo:he,docs:fe}=ae;return E(he.totalDocs),fe}else return[]}catch(C){throw console.error(C),C}}}),pe=s.useMemo(()=>no,[]);return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{children:[e.jsx("div",{className:"breadcrumb",children:e.jsx(Pe,{routeSegments:[{name:"Ventas",path:"/ventas/gestion"},{name:"Gestión de Consumos Específicos"}]})}),e.jsxs(qe,{children:[e.jsx(k,{children:e.jsx(y,{size:"small",startIcon:e.jsx(F,{}),onClick:()=>b(!0),variant:"outlined",children:"MIS VENTAS"})}),e.jsx(k,{children:e.jsx(y,{size:"small",startIcon:e.jsx(F,{}),onClick:()=>p(!0),variant:"outlined",children:"EXPORTAR"})}),e.jsx(k,{children:e.jsx(y,{size:"small",startIcon:e.jsx(F,{}),onClick:()=>x(!0),variant:"outlined",children:"EXPORTAR DETALLES"})})]}),e.jsx(g,{container:!0,spacing:2,children:e.jsx(g,{item:!0,lg:12,md:12,xs:12,children:e.jsx(xe,{...We,columns:pe,data:de??[],initialState:{showColumnFilters:!0,columnVisibility:{cuf:!1,montoTotal:!1,tipoCambio:!1}},manualFiltering:!0,manualPagination:!0,manualSorting:!0,muiToolbarAlertBannerProps:oe?{color:"error",children:"Error Cargando Datos"}:void 0,onColumnFiltersChange:n,onPaginationChange:r,onSortingChange:M,enableDensityToggle:!1,enableGlobalFilter:!1,rowCount:j,state:{isLoading:ue,columnFilters:c,pagination:a,showAlertBanner:oe,showProgressBars:me,sorting:m,density:"compact",columnPinning:{right:["actions"]},rowSelection:le},enableRowActions:!0,positionActionsColumn:"first",displayColumnDefOptions:{"mrt-row-actions":{header:"Acciones",size:100}},renderTopToolbarCustomActions:({table:C})=>e.jsx(Ye,{refetch:ce,sx:{flexGrow:1}}),renderRowActions:({row:C})=>e.jsxs("div",{style:{display:"flex",flexWrap:"nowrap",gap:"0.5rem"},children:[e.jsxs(Re,{menuButton:e.jsx(e.Fragment,{children:e.jsx(we,{"aria-label":"delete",children:e.jsx(Ae,{})})}),children:[e.jsxs(T,{onClick:z=>{z.preventDefault(),l(!0),o(C.original)},children:[e.jsx(ze,{})," Anular Documento"]}),e.jsxs(T,{onClick:()=>{W(C.original.representacionGrafica.pdf)},children:[e.jsx(Te,{})," Pdf Medio Oficio"]}),e.jsxs(T,{onClick:()=>{W(C.original.representacionGrafica.xml)},children:[e.jsx(ne,{})," Xml"]}),e.jsxs(T,{onClick:()=>{W(C.original.representacionGrafica.sin)},children:[e.jsx(ne,{})," Url S.I.N."]}),e.jsxs(T,{onClick:z=>{z.preventDefault(),u(!0),o(C.original)},children:[e.jsx(ke,{})," Reenviar Correo"]})]}),e.jsx(je,{row:C.original})]})})})}),e.jsx(Ie,{py:"12px"}),e.jsx(Xe,{id:"anularDocumentoDialog",open:t,keepMounted:!0,factura:i,onClose:async C=>{C&&await te(),o(null),l(!1)}})]}),e.jsx(ao,{id:"ventaGestionExportar",keepMounted:!0,open:v,onClose:()=>{p(!1)}}),e.jsx(to,{id:"ventaGestionExportarDetalle",keepMounted:!0,open:d,onClose:()=>{x(!1)}}),e.jsx(Je,{id:"misVentasDialog",keepMounted:!1,open:f,onClose:()=>{b(!1)}}),e.jsx(oo,{id:"reenviarEmails",keepMounted:!0,open:h,onClose:()=>{o(null),u(!1)},factura:i})]})};export{jt as default};
