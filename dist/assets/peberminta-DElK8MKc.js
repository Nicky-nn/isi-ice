function x(e,o){return(n,u)=>{let t=u,r;return u<n.tokens.length?(r=e(n.tokens[u],n,u),r!==void 0&&t++):o==null||o(n,u),r===void 0?{matched:!1}:{matched:!0,position:t,value:r}}}function f(e,o){return e.matched?{matched:!0,position:e.position,value:o(e.value,e.position)}:e}function c(e,o){return e.matched?o(e):e}function a(e,o){return(n,u)=>f(e(n,u),(t,r)=>o(t,n,u,r))}function A(e,o){return(n,u)=>{const t=e(n,u);return t.matched?t:{matched:!0,position:u,value:o}}}function I(...e){return(o,n)=>{for(const u of e){const t=u(o,n);if(t.matched)return t}return{matched:!1}}}function L(e,o){return(n,u)=>{const t=e(n,u);return t.matched?t:o(n,u)}}function m(e,o){return(n,u)=>{const t=[];let r=!0;do{const i=e(n,u);i.matched&&o(i.value,t.length+1,n,u,i.position)?(t.push(i.value),u=i.position):r=!1}while(r);return{matched:!0,position:u,value:t}}}function v(e){return m(e,()=>!0)}function M(e){return l(e,v(e),(o,n)=>[o,...n])}function l(e,o,n){return(u,t)=>c(e(u,t),r=>f(o(u,r.position),(i,s)=>n(r.value,i,u,t,s)))}function O(e,o){return l(e,o,n=>n)}function R(e,o){return l(e,o,(n,u)=>u)}function d(e,o,n,u){return(t,r)=>c(e(t,r),i=>c(o(t,i.position),s=>f(n(t,s.position),(h,p)=>u(i.value,s.value,h,t,r,p))))}function W(e,o,n){return d(e,o,n,(u,t)=>t)}function g(...e){return(o,n)=>{const u=[];let t=n;for(const r of e){const i=r(o,t);if(i.matched)u.push(i.value),t=i.position;else return{matched:!1}}return{matched:!0,position:t,value:u}}}function j(...e){return k(g(...e))}function k(e){return a(e,o=>o.flatMap(n=>n))}function w(e,o){return(n,u)=>{let t=!0,r=e,i=u;do{const s=o(r,n,i)(n,i);s.matched?(r=s.value,i=s.position):t=!1}while(t);return{matched:!0,position:i,value:r}}}function b(e,o,n){return w(e,u=>a(o,(t,r,i,s)=>n(u,t,r,i,s)))}function q(e,o,n){return y(e,u=>b(u,l(o,n,(t,r)=>[t,r]),(t,[r,i])=>r(t,i)))}function y(e,o){return(n,u)=>c(e(n,u),t=>o(t.value,n,u,t.position)(n,t.position))}export{M as a,v as b,W as c,l as d,O as e,j as f,I as g,A as h,d as i,q as l,a as m,L as o,R as r,x as t};
