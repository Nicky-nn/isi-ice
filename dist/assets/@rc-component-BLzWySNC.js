import{c as S,d as b,e as u}from"./@babel-BWOPM2cf.js";function N(){return typeof BigInt=="function"}function E(r){return!r&&r!==0&&!Number.isNaN(r)||!String(r).trim()}function g(r){var t=r.trim(),e=t.startsWith("-");e&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var i=t||"0",n=i.split("."),a=n[0]||"0",l=n[1]||"0";a==="0"&&l==="0"&&(e=!1);var s=e?"-":"";return{negative:e,negativeStr:s,trimStr:i,integerStr:a,decimalStr:l,fullStr:"".concat(s).concat(i)}}function h(r){var t=String(r);return!Number.isNaN(Number(t))&&t.includes("e")}function m(r){var t=String(r);if(h(r)){var e=Number(t.slice(t.indexOf("e-")+2)),i=t.match(/\.(\d+)/);return i!=null&&i[1]&&(e+=i[1].length),e}return t.includes(".")&&I(t)?t.length-t.indexOf(".")-1:0}function y(r){var t=String(r);if(h(r)){if(r>Number.MAX_SAFE_INTEGER)return String(N()?BigInt(r).toString():Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return String(N()?BigInt(r).toString():Number.MIN_SAFE_INTEGER);t=r.toFixed(m(t))}return g(t).fullStr}function I(r){return typeof r=="number"?!Number.isNaN(r):r?/^\s*-?\d+(\.\d+)?\s*$/.test(r)||/^\s*-?\d+\.\s*$/.test(r)||/^\s*-?\.\d+\s*$/.test(r):!1}var _=function(){function r(t){if(b(this,r),u(this,"origin",""),u(this,"negative",void 0),u(this,"integer",void 0),u(this,"decimal",void 0),u(this,"decimalLen",void 0),u(this,"empty",void 0),u(this,"nan",void 0),E(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var e=t;if(h(e)&&(e=Number(e)),e=typeof e=="string"?e:y(e),I(e)){var i=g(e);this.negative=i.negative;var n=i.trimStr.split(".");this.integer=BigInt(n[0]);var a=n[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}return S(r,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var i="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(i)}},{key:"negate",value:function(){var e=new r(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,i,n){var a=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),l=this.alignDecimal(a),s=e.alignDecimal(a),f=i(l,s).toString(),c=n(a),o=g(f),v=o.negativeStr,k=o.trimStr,d="".concat(v).concat(k.padStart(c+1,"0"));return new r("".concat(d.slice(0,-c),".").concat(d.slice(-c)))}},{key:"add",value:function(e){if(this.isInvalidate())return new r(e);var i=new r(e);return i.isInvalidate()?this:this.cal(i,function(n,a){return n+a},function(n){return n})}},{key:"multi",value:function(e){var i=new r(e);return this.isInvalidate()||i.isInvalidate()?new r(NaN):this.cal(i,function(n,a){return n*a},function(n){return n*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(e==null?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":g("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),r}(),p=function(){function r(t){if(b(this,r),u(this,"origin",""),u(this,"number",void 0),u(this,"empty",void 0),E(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return S(r,[{key:"negate",value:function(){return new r(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new r(e);var i=Number(e);if(Number.isNaN(i))return this;var n=this.number+i;if(n>Number.MAX_SAFE_INTEGER)return new r(Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return new r(Number.MIN_SAFE_INTEGER);var a=Math.max(m(this.number),m(i));return new r(n.toFixed(a))}},{key:"multi",value:function(e){var i=Number(e);if(this.isInvalidate()||Number.isNaN(i))return new r(NaN);var n=this.number*i;if(n>Number.MAX_SAFE_INTEGER)return new r(Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return new r(Number.MIN_SAFE_INTEGER);var a=Math.max(m(this.number),m(i));return new r(n.toFixed(a))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(e==null?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":y(this.number):this.origin}}]),r}();function D(r){return N()?new _(r):new p(r)}function A(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(r==="")return"";var n=g(r),a=n.negativeStr,l=n.integerStr,s=n.decimalStr,f="".concat(t).concat(s),c="".concat(a).concat(l);if(e>=0){var o=Number(s[e]);if(o>=5&&!i){var v=D(r).add("".concat(a,"0.").concat("0".repeat(e)).concat(10-o));return A(v.toString(),t,e,i)}return e===0?c:"".concat(c).concat(t).concat(s.padEnd(e,"0").slice(0,e))}return f===".0"?c:"".concat(c).concat(f)}export{m as a,A as b,D as g,y as n,g as t,I as v};
